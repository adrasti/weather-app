<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Document</title><base href=.><script defer=defer src=main.31d6cfe0d16ae931b73c.js></script><link href=main.d570c9d60cb677a42db4.css rel=stylesheet></head><body><div id=page><div class=text></div><div class=main><div class=cont><div class=maps><div id=map></div></div><div class=weather><div class=temp><p id=tempnum></p><p id=state></p></div><div id=sunr><p>—</p><h3>sunrise</h3></div><div id=suns><p>—</p><h3>sunset</h3></div><div id=wind><p>—</p><h3>wind</h3></div><div id=flslike><p>—</p><h3>feels like</h3></div><div id=pres><p>—</p><h3>pressure</h3></div><div id=humid><p>—</p><h3>humidity</h3></div><div id=tzone><p>—</p><h3>time zone</h3></div><div id=vbility><p>—</p><h3>visibility</h3></div></div></div></div></div><script src="https://api-maps.yandex.ru/2.1/?apikey=d2fcfcfc-0a1f-4563-b55d-8386a2084304&lang=en_RU"></script><script>function init(){myMap=new ymaps.Map("map",{center:[55.7558,37.6173],zoom:4},{balloonMaxWidth:1500,balloonMaxHeight:100,searchControlProvider:"yandex#search"}),myMap.options.set("dragCursor","pointer"),myMap.events.add("click",(function(e){if(myMap.balloon.isOpen())myMap.balloon.close();else{var t=e.get("coords");myMap.balloon.open(t,{contentHeader:"",contentBody:'<p id = "coord">'+[t[0].toPrecision(6),t[1].toPrecision(6)].join(", ")+"</p>",contentFooter:"<sup>Щелкните еще раз</sup>"}),getW(t[1],t[0])}})),myMap.events.add("balloonopen",(function(e){myMap.hint.close()}))}async function getW(e,t){const o=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${e}&appid=c1ae969295473bf23abb9854d63dc1ee`,{mode:"cors"}),n=await fetch(`https://geocode-maps.yandex.ru/1.x/?format=json&apikey=d2fcfcfc-0a1f-4563-b55d-8386a2084304&geocode=${e},${t}&lang=en_RU`,{mode:"cors"});updateDOM(await o.json(),await n.json())}function convertTime(e,t){return new Date(1e3*(e+t-10800)).toString().slice(16,24)}function textColor(e){document.querySelector(".text").style.color=e}async function updateDOM(e,t){let o;const n=document.querySelector(".text");o=Number(e.timezone)>=0?"GMT+"+String((Number(e.timezone)/3600).toFixed(0)):"GMT"+String((Number(e.timezone)/3600).toFixed(0));let a="";e.name&&(a+=e.name);const r=t.response.GeoObjectCollection.featureMember[0].GeoObject.metaDataProperty.GeocoderMetaData.Address.Components[0].name;r&&(a=a?a+", "+r:r),n.textContent=a,document.querySelector("#tempnum").textContent=String((Number(e.main.temp)-273.15).toFixed(1))+"°",document.querySelector("#state").textContent=e.weather[0].description,document.querySelector("#sunr p").textContent=convertTime(e.sys.sunrise,e.timezone),document.querySelector("#suns p").textContent=convertTime(e.sys.sunset,e.timezone),document.querySelector("#wind p").textContent=String(e.wind.speed)+" m/sec",document.querySelector("#flslike p").textContent=String((Number(e.main.feels_like)-273.15).toPrecision(3))+"°",document.querySelector("#pres p").textContent=String((.02953*Number(e.main.pressure)).toFixed(1))+" inHg",document.querySelector("#humid p").textContent=String(e.main.humidity)+"%",document.querySelector("#tzone p").textContent=o,document.querySelector("#vbility p").textContent=String((Number(e.visibility)/1e3).toFixed(1))+" km";let i=String(e.weather[0].id);const c=document.querySelector("#page");textColor("black"),"8"==i[0]?0==i[2]?(c.className="",c.classList.add("clear")):"4"==i[2]?(c.className="",c.classList.add("overcast"),textColor("white")):c.classList.add("cloudy"):"5"==i[0]?(c.className="",c.classList.add("rainy"),textColor("white")):"3"==i[0]&&(c.className="",c.classList.add("drizzle"))}ymaps.ready(init)</script></body></html>