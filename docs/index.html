<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Document</title><base href=.><script defer=defer src=main.31d6cfe0d16ae931b73c.js></script><link href=main.5015116640f5af47f871.css rel=stylesheet></head><body><div id=page class=cloudy><div class=text>Click the map!</div><div class=main><div class=cont><div class=maps><div id=map></div></div><div class=weather><div class=temp><p id=tempnum></p><p id=state></p></div><div id=sunr><p>—</p><h3>sunrise</h3></div><div id=suns><p>—</p><h3>sunset</h3></div><div id=wind><p>—</p><h3>wind</h3></div><div id=flslike><p>—</p><h3>feels like</h3></div><div id=pres><p>—</p><h3>pressure</h3></div><div id=humid><p>—</p><h3>humidity</h3></div><div id=tzone><p>—</p><h3>time zone</h3></div><div id=vbility><p>—</p><h3>visibility</h3></div></div></div></div></div><script src="https://api-maps.yandex.ru/2.1/?apikey=d2fcfcfc-0a1f-4563-b55d-8386a2084304&lang=en_RU"></script><script>function init(){myMap=new ymaps.Map("map",{center:[55.7558,37.6173],zoom:4},{balloonMaxWidth:1500,balloonMaxHeight:100,searchControlProvider:"yandex#search"}),myMap.options.set("dragCursor","pointer"),myMap.events.add("click",(function(e){if(myMap.balloon.isOpen())myMap.balloon.close();else{var t=e.get("coords");myMap.balloon.open(t,{contentHeader:"",contentBody:'<p id = "coord">'+[t[0].toPrecision(6),t[1].toPrecision(6)].join(", ")+"</p>",contentFooter:"<sup>Щелкните еще раз</sup>"}),getW(t[1],t[0])}})),myMap.events.add("balloonopen",(function(e){myMap.hint.close()}))}async function getW(e,t){const n=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${e}&appid=c1ae969295473bf23abb9854d63dc1ee`,{mode:"cors"}),o=await fetch(`https://geocode-maps.yandex.ru/1.x/?format=json&apikey=d2fcfcfc-0a1f-4563-b55d-8386a2084304&geocode=${e},${t}&lang=en_RU`,{mode:"cors"});updateDOM(await n.json(),await o.json())}function convertTime(e,t){return new Date(1e3*(e+t-10800)).toString().slice(16,24)}function textColor(e){document.querySelector(".text").style.color=e}function getWidth(){return window.innerWidth&&document.documentElement.clientWidth?Math.min(window.innerWidth,document.documentElement.clientWidth):window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth}function getHeight(){return window.innerHeight&&document.documentElement.clientHeight?Math.min(window.innerHeight,document.documentElement.clientHeight):window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight}async function updateDOM(e,t){let n;const o=document.querySelector(".text");n=Number(e.timezone)>=0?"GMT+"+String((Number(e.timezone)/3600).toFixed(0)):"GMT"+String((Number(e.timezone)/3600).toFixed(0));let i="";e.name&&(i+=e.name);const c=t.response.GeoObjectCollection.featureMember[0].GeoObject.metaDataProperty.GeocoderMetaData.Address.Components[0].name;c&&(i=i?i+", "+c:c),o.textContent=i,document.querySelector("#tempnum").textContent=String((Number(e.main.temp)-273.15).toFixed(1))+"°",document.querySelector("#state").textContent=e.weather[0].description,document.querySelector("#sunr p").textContent=convertTime(e.sys.sunrise,e.timezone),document.querySelector("#suns p").textContent=convertTime(e.sys.sunset,e.timezone),document.querySelector("#wind p").textContent=String(e.wind.speed)+" m/sec",document.querySelector("#flslike p").textContent=String((Number(e.main.feels_like)-273.15).toPrecision(3))+"°",document.querySelector("#pres p").textContent=String((.02953*Number(e.main.pressure)).toFixed(1))+" inHg",document.querySelector("#humid p").textContent=String(e.main.humidity)+"%",document.querySelector("#tzone p").textContent=n,document.querySelector("#vbility p").textContent=String((Number(e.visibility)/1e3).toFixed(1))+" km";let r=String(e.weather[0].id);const a=document.querySelector("#page");textColor("black"),console.log(r),"8"==r[0]?0==r[2]?(a.className="",a.classList.add("clear")):"4"==r[2]?(a.className="",a.classList.add("overcast"),textColor("white")):(a.className="",a.classList.add("cloudy")):"5"==r[0]?(a.className="",a.classList.add("rainy"),textColor("white")):"3"==r[0]&&(a.className="",a.classList.add("drizzle"))}window.addEventListener("resize",(()=>{getWidth()<=800&&(document.querySelector("#map").style.height=.7*getHeight()+"px",document.querySelector("#map").style.width=.45*getWidth()+"px")})),getWidth()<=800&&(document.querySelector("#map").style.height=.7*getHeight()+"px",document.querySelector("#map").style.width=.45*getWidth()+"px"),ymaps.ready(init)</script></body></html>